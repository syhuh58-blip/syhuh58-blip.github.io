<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pastebin — Dark UI</title>
<style>
  /* ---- Palette & base ---- */
  :root{
    --bg-0:#050507;
    --bg-1:#0b0b0d;
    --panel:#121212;
    --muted:#9aa3b2;
    --accent:#7c3aed; /* purple */
    --accent-2:#ef4444; /* red */
    --row-odd:#0f0f10;
    --row-even:#161617;
    --pinned:#3a2414;
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:
    radial-gradient(ellipse at 10% 20%, rgba(124,58,237,0.06), transparent 5%),
    linear-gradient(180deg, var(--bg-0), var(--bg-1) 60%);color:#e6eef8}
  .app{max-width:1100px;margin:36px auto;padding:18px;position:relative}
  /* particles canvas sits behind */
  canvas#bgc{position:fixed;left:0;top:0;z-index:0;pointer-events:none}

  header{display:flex;align-items:center;gap:16px;margin-bottom:18px;z-index:1;position:relative}
  .logo{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,#0b1220,#111827);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--accent);font-size:14px;box-shadow:0 8px 28px rgba(0,0,0,.6)}
  h1{font-size:20px;margin:0}
  .controls{margin-left:auto;display:flex;gap:10px;align-items:center}

  .searchbar{display:flex;gap:8px;align-items:center;background:var(--panel);padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03)}
  .searchbar input{background:transparent;border:0;color:inherit;padding:6px 8px;min-width:260px}
  .searchbar input:focus{outline:none}
  .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;cursor:pointer;color:inherit}
  .btn.primary{background:linear-gradient(90deg,var(--accent),#5b21b6);border:0;font-weight:700}
  .btn.ghost{background:transparent}

  main.panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:10px;padding:16px;border:1px solid rgba(255,255,255,0.04);z-index:1;position:relative}
  .meta{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
  .meta .left{display:flex;gap:12px;align-items:center}
  .badge{background:rgba(239,68,68,0.12);color:var(--accent-2);padding:6px 10px;border-radius:999px;font-weight:700}

  /* table style like screenshot */
  table{width:100%;border-collapse:collapse;font-size:13px}
  thead th{background:rgba(0,0,0,0.45);padding:10px;text-align:left;color:var(--muted);font-weight:700;border-radius:6px}
  tbody tr{cursor:pointer;transition:background .12s}
  tbody tr:hover{background:rgba(255,255,255,0.02)}
  tbody td{padding:10px;border-top:1px solid rgba(255,255,255,0.02)}
  .col-title{width:45%}
  .col-views,.col-comments,.col-date{width:10%;text-align:right;color:var(--muted)}
  .posted-by{color:#fbbf24;font-weight:600;text-align:right}
  .pinned-row{background:linear-gradient(90deg,#2b1b10,#2b1512);color:#fff}

  .pinned-area{margin-bottom:12px;border-radius:8px;overflow:hidden}
  .pinned-area table td{padding:10px}

  .pagination{display:flex;gap:6px;padding:10px;justify-content:center}
  .pager{background:transparent;border:1px solid rgba(255,255,255,0.05);padding:6px 10px;border-radius:6px;cursor:pointer}
  .pager.active{background:linear-gradient(90deg,var(--accent),#5b21b6);border:0}

  /* small UI bits */
  .muted{color:var(--muted);font-size:13px}
  .small{font-size:12px;color:var(--muted)}
  .row-title{font-weight:700;color:#e6eef8}
  .row-sub{color:var(--muted);font-size:12px}

  /* modals */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:30}
  .modal{background:linear-gradient(180deg,#0c0c0d,#0a0a0b);padding:18px;border-radius:10px;width:90%;max-width:820px;border:1px solid rgba(255,255,255,0.04)}
  .form-row{display:flex;flex-direction:column;gap:6px;margin:8px 0}
  .form-row input,.form-row textarea{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:6px;color:inherit;min-height:36px}
  .form-row textarea{min-height:140px;resize:vertical;padding:10px}

  .topbar-info{color:var(--muted);font-size:13px}

  @media (max-width:720px){
    .col-date,.col-views{display:none}
    .searchbar input{min-width:120px}
  }
</style>
</head>
<body>
<canvas id="bgc"></canvas>

<div class="app" id="app">
  <header>
    <div class="logo">MewBin</div>
    <div>
      <h1>Public Pastes</h1>
      <div class="topbar-info small">Showcases & quick snippets — local demo</div>
    </div>

    <div class="controls">
      <div class="searchbar" role="search">
        <input id="searchInput" placeholder="Search title or paste..." />
        <button id="searchBtn" class="btn">Search</button>
      </div>
      <button id="newBtn" class="btn primary">New Paste</button>
    </div>
  </header>

  <main class="panel">
    <div class="meta">
      <div class="left">
        <div class="badge">Pinned</div>
        <div class="muted" id="stats">Showing 0 pastes</div>
      </div>
      <div class="small muted">Showing <span id="showingCount">0</span> of <span id="totalCount">0</span> total pastes</div>
    </div>

    <div class="pinned-area" id="pinnedArea"></div>

    <div id="listArea">
      <table id="pasteTable" aria-live="polite">
        <thead>
          <tr>
            <th class="col-title">Title</th>
            <th class="col-comments">Comments</th>
            <th class="col-views">Views</th>
            <th class="posted-by">Posted by</th>
            <th class="col-date">Date</th>
          </tr>
        </thead>
        <tbody id="pasteBody"></tbody>
      </table>
    </div>

    <div class="pagination" id="pagination"></div>
  </main>
</div>

<!-- View Modal -->
<div class="modal-backdrop" id="viewModal">
  <div class="modal" role="dialog" aria-modal="true">
    <div style="display:flex;align-items:center;justify-content:space-between">
      <strong id="viewTitle">Paste title</strong>
      <div>
        <button class="btn" id="pinToggle">Pin</button>
        <button class="btn" id="closeView">Close</button>
      </div>
    </div>
    <div class="small muted" style="margin-top:8px" id="viewMeta">by user — date</div>
    <pre id="viewContent" style="white-space:pre-wrap;margin-top:12px;background:rgba(255,255,255,0.02);padding:12px;border-radius:8px"></pre>
  </div>
</div>

<!-- New paste modal -->
<div class="modal-backdrop" id="newModal">
  <div class="modal">
    <div style="display:flex;align-items:center;justify-content:space-between">
      <strong>New Paste</strong>
      <div><button class="btn" id="closeNew">Close</button></div>
    </div>

    <div class="form-row">
      <label class="small">Title</label>
      <input id="newTitle" placeholder="Short descriptive title" />
    </div>
    <div class="form-row">
      <label class="small">Your name</label>
      <input id="newAuthor" placeholder="anonymous" />
    </div>
    <div class="form-row">
      <label class="small">Paste text</label>
      <textarea id="newContent" placeholder="Paste your text here..."></textarea>
    </div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
      <button class="btn" id="savePaste">Save</button>
      <button class="btn primary" id="saveAndView">Save & View</button>
    </div>
  </div>
</div>

<script>
/* -------------------------
   Particle background (canvas)
   ------------------------- */
(function(){
  const canvas = document.getElementById('bgc');
  const ctx = canvas.getContext('2d');
  let w=canvas.width=innerWidth, h=canvas.height=innerHeight;
  const particles=[];
  const N = Math.floor((w*h)/90000); // scale count by viewport
  for(let i=0;i<N;i++){
    particles.push({
      x: Math.random()*w,
      y: Math.random()*h,
      r: Math.random()*2+1,
      vx: (Math.random()-0.5)*0.2,
      vy: (Math.random()-0.5)*0.2,
      hue: 270 + Math.random()*40
    });
  }
  function resize(){ w=canvas.width=innerWidth; h=canvas.height=innerHeight; }
  addEventListener('resize', resize);
  function step(){
    ctx.clearRect(0,0,w,h);
    particles.forEach(p=>{
      p.x += p.vx;
      p.y += p.vy;
      if(p.x<0)p.x=w;
      if(p.x>w)p.x=0;
      if(p.y<0)p.y=h;
      if(p.y>h)p.y=0;
      ctx.beginPath();
      ctx.fillStyle = 'hsla('+p.hue+',70%,'+(30+Math.abs(Math.sin(p.x))*10)+'%,0.8)';
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fill();
    });
    requestAnimationFrame(step);
  }
  step();
})();

/* -------------------------
   App data + rendering
   ------------------------- */
const perPage = 10;
let state = {
  pastes: [],     // loaded from localStorage
  q: '',
  page: 1
};

const sampleData = [
  {id:uid(),title:'dfgdfgdf',author:'xsss1',content:'sample paste text',comments:0,views:1,date:'June 10',pinned:false},
  {id:uid(),title:'eldzhei music',author:'anonymous',content:'music notes',comments:0,views:35,date:'June 3',pinned:false},
  {id:uid(),title:'0x01 Pothead Red',author:'saint',content:'0x01 paste content',comments:2,views:55,date:'June 3',pinned:false},
  {id:uid(),title:'Oliwers Dox',author:'oo',content:'sensitive? demo',comments:1,views:45,date:'June 2',pinned:false},
  {id:uid(),title:'tatwole bloger',author:'bella',content:'blog sample',comments:0,views:35,date:'June 2',pinned:false},
  {id:uid(),title:'Flaskin, Ghostbin Owner',author:'system',content:'owner notes',comments:0,views:35,date:'June 2',pinned:true},
  {id:uid(),title:'Kattave',author:'Shooter',content:'pinned note',comments:2,views:1239,date:'June 2',pinned:true},
  // more filler
  {id:uid(),title:'test',author:'anonymous',content:'just a test',comments:0,views:40,date:'June 2',pinned:false},
];

function uid(){ return 'p'+Math.random().toString(36).slice(2,9); }

function load(){
  const raw = localStorage.getItem('demo_pastes_v1');
  if(raw){
    try{
      state.pastes = JSON.parse(raw);
    }catch(e){ state.pastes = sampleData; save(); }
  } else {
    state.pastes = sampleData;
    save();
  }
}
function save(){
  localStorage.setItem('demo_pastes_v1', JSON.stringify(state.pastes));
}

/* render helpers */
function formatRow(p){
  return `
    <tr data-id="${p.id}" class="${p.pinned ? 'pinned-row' : ''}">
      <td class="col-title">
        <div class="row-title">${escapeHtml(p.title)}</div>
        <div class="row-sub">${escapeHtml(p.content.slice(0,120))}${p.content.length>120?'…':''}</div>
      </td>
      <td class="col-comments">${p.comments ?? '-'}</td>
      <td class="col-views">${p.views ?? 0}</td>
      <td class="posted-by">${escapeHtml(p.author || 'anonymous')}</td>
      <td class="col-date">${escapeHtml(p.date || '')}</td>
    </tr>
  `;
}
function render(){
  const body = document.getElementById('pasteBody');
  const pinnedArea = document.getElementById('pinnedArea');
  const total = state.pastes.length;
  document.getElementById('totalCount').textContent = total;

  // filter search
  const q = state.q.trim().toLowerCase();
  let filtered = state.pastes.filter(p=>{
    if(!q) return true;
    return (p.title||'').toLowerCase().includes(q) || (p.content||'').toLowerCase().includes(q);
  });

  document.getElementById('showingCount').textContent = filtered.length;

  // pinned first
  const pinned = filtered.filter(p=>p.pinned);
  const others = filtered.filter(p=>!p.pinned);

  // render pinned area
  if(pinned.length){
    pinnedArea.innerHTML = `<table><tbody>${pinned.map(p=>`
      <tr data-id="${p.id}" class="pinned-row">
        <td style="width:45%"><strong>${escapeHtml(p.title)}</strong><div class="small">${escapeHtml(p.content.slice(0,120))}</div></td>
        <td style="width:10%" class="small">${p.comments||0}</td>
        <td style="width:10%" class="small">${p.views||0}</td>
        <td style="text-align:right" class="small">${escapeHtml(p.author||'anonymous')}</td>
        <td style="width:10%" class="small">${escapeHtml(p.date||'')}</td>
      </tr>`).join('')}</tbody></table>`;
  } else {
    pinnedArea.innerHTML = '';
  }

  // pagination
  const page = state.page || 1;
  const start = (page-1)*perPage;
  const pageItems = others.slice(start, start+perPage);
  body.innerHTML = pageItems.map(formatRow).join('');
  setupRowClicks();

  // pagination controls
  const pages = Math.max(1, Math.ceil(others.length / perPage));
  const pg = document.getElementById('pagination');
  pg.innerHTML = '';
  for(let i=1;i<=pages;i++){
    const btn = document.createElement('button');
    btn.className = 'pager' + (i===page ? ' active' : '');
    btn.textContent = i;
    btn.addEventListener('click', ()=>{ state.page = i; render(); });
    pg.appendChild(btn);
  }
  document.getElementById('stats').textContent = `Showing ${pageItems.length + pinned.length} entries`;
}

/* utility: escape HTML */
function escapeHtml(s){
  if(!s) return '';
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

/* click handlers to open view modal */
function setupRowClicks(){
  document.querySelectorAll('#pasteBody tr, #pinnedArea tr').forEach(tr=>{
    tr.onclick = ()=>{
      const id = tr.getAttribute('data-id');
      openView(id);
    };
  });
}

/* open view modal */
const viewModal = document.getElementById('viewModal');
const newModal = document.getElementById('newModal');
let activeId = null;
function openView(id){
  const p = state.pastes.find(x=>x.id===id);
  if(!p) return;
  activeId = id;
  // increment views
  p.views = (p.views||0)+1;
  save();
  document.getElementById('viewTitle').textContent = p.title;
  document.getElementById('viewMeta').textContent = `${p.author||'anonymous'} — ${p.date||''} • ${p.comments||0} comments`;
  document.getElementById('viewContent').textContent = p.content;
  document.getElementById('pinToggle').textContent = p.pinned ? 'Unpin' : 'Pin';
  viewModal.style.display = 'flex';
  render();
}

/* close view */
document.getElementById('closeView').onclick = ()=>{ viewModal.style.display='none'; activeId=null; };

/* pin toggle */
document.getElementById('pinToggle').onclick = ()=>{
  if(!activeId) return;
  const p = state.pastes.find(x=>x.id===activeId);
  if(!p) return;
  p.pinned = !p.pinned;
  save();
  document.getElementById('pinToggle').textContent = p.pinned ? 'Unpin' : 'Pin';
  render();
};

/* New paste modal controls */
document.getElementById('newBtn').onclick = ()=>{ newModal.style.display='flex'; };
document.getElementById('closeNew').onclick = ()=>{ newModal.style.display='none'; };

document.getElementById('savePaste').onclick = ()=>{ saveNew(false); };
document.getElementById('saveAndView').onclick = ()=>{ saveNew(true); };

function saveNew(openAfter){
  const title = document.getElementById('newTitle').value.trim() || 'Untitled';
  const author = document.getElementById('newAuthor').value.trim() || 'anonymous';
  const content = document.getElementById('newContent').value.trim() || '';
  const date = new Date().toLocaleDateString(undefined, {month:'short',day:'numeric'});
  const paste = { id: uid(), title, author, content, comments:0, views:0, date, pinned:false };
  state.pastes.unshift(paste); // newest first
  save();
  document.getElementById('newTitle').value='';
  document.getElementById('newAuthor').value='';
  document.getElementById('newContent').value='';
  newModal.style.display='none';
  if(openAfter) openView(paste.id);
  render();
}

/* search */
document.getElementById('searchBtn').onclick = ()=>{ state.q = document.getElementById('searchInput').value; state.page = 1; render(); };
document.getElementById('searchInput').addEventListener('keydown', e=>{ if(e.key==='Enter'){ state.q = e.target.value; state.page=1; render(); } });

/* keyboard: n to open new */
addEventListener('keydown', e=>{ if(e.key==='n' && document.activeElement.tagName!=='INPUT' && document.activeElement.tagName!=='TEXTAREA'){ newModal.style.display='flex'; } });

/* init */
load();
render();

/* expose for debugging (optional) */
window._pastes = state.pastes;
</script>
</body>
</html>
